(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{237:function(t,a,s){"use strict";s.r(a);var e=s(3),i=s(1);e.d.add(i.hb,i.e);var o={components:{VuePagination:function(){return s.e(97).then(s.bind(null,322))}},props:["user"],data:function(){return{darkMode:0,bodyBackground:"",boxBackground:"",primaryText:"",secondaryText:"",searchBodyBackground:"",last_updated:"",comsiteData:{can:Array,total:0,per_page:2,from:1,to:0,current_page:1},searchText:""}},created:function(){this.styleMode()},mounted:function(){this.lastUpdated(),this.getComsiteData()},methods:{getComsiteData:function(){var t=this;axios.get("/api/comsites?page=".concat(this.comsiteData.current_page,"&text=").concat(this.searchText)).then((function(a){t.comsiteData=a.data,console.log(a.data)}))},styleMode:function(){1==this.darkMode?(this.bodyBackground="has-background-black-ter",this.boxBackground="has-background-dark",this.primaryText="has-text-white",this.secondaryText="has-text-grey-light",this.searchBodyBackground="has-background-dark"):(this.bodyBackground="has-background-light",this.boxBackground="has-background-white",this.primaryText="has-text-dark",this.secondaryText="has-text-grey",this.searchBodyBackground="has-background-white")},changeStyle:function(){0==this.darkMode?(this.darkMode=1,this.styleMode()):(this.darkMode=0,this.styleMode())},clearSearch:function(){this.searchText="",this.getComsiteData()},lastUpdated:function(){var t=this;axios.get("/api/comsiteLastData").then((function(a){t.last_updated=a.data.data}))}}},r=s(0),n=Object(r.a)(o,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"section is-marginless",class:t.bodyBackground},[s("div",{staticClass:"container"},[s("div",{staticClass:"box",class:t.boxBackground},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input is-rounded",class:t.bodyBackground+" "+t.primaryText,attrs:{type:"text","arial-label":"Buscar",placeholder:"Buscar...",autofocus:""},domProps:{value:t.searchText},on:{keyup:t.getComsiteData,input:[function(a){a.target.composing||(t.searchText=a.target.value)},function(a){t.comsiteData.current_page=1}]}}),t._v(" "),s("span",{staticClass:"icon is-small is-left"},[s("font-awesome-icon",{attrs:{icon:"search"}})],1),t._v(" "),s("span",{staticClass:"icon is-small is-right"},[s("button",{staticClass:"delete",on:{click:t.clearSearch}})])])]),t._v(" "),s("table",{staticClass:"table is-fullwidth",class:t.boxBackground},[s("thead",[s("tr",[s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("# Contrato")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("POP")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("Operador")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("Fechas Contratos")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("Propietario")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold",class:t.secondaryText},[s("abbr",{attrs:{title:"id"}},[t._v("Rol Propiedad")])]),t._v(" "),s("th",{staticClass:"is-size-7 has-text-weight-semibold has-text-centered"})])]),t._v(" "),s("tbody",t._l(t.comsiteData.data,(function(a){return s("tr",{staticClass:"is-size-7 has-text-weight-light"},[s("td",{staticClass:"has-text-weight-light",class:t.primaryText},[t._v(t._s(a.id))]),t._v(" "),s("td",{},[s("div",{staticClass:"is-size-7 has-text-weight-normal",class:t.primaryText},[t._v("\n                                "+t._s(a.pop?a.pop.nombre:"")+"\n                            ")]),t._v(" "),s("div",{staticClass:"is-size-7 has-text-weight-normal",class:t.secondaryText},[t._v("\n                                "+t._s(a.pop?a.pop.comuna.nombre:"")+"\n                            ")]),t._v(" "),s("div",{staticClass:"is-size-7 has-text-weight-normal",class:t.secondaryText},[t._v("\n                                "+t._s(a.pop?"Zona: "+a.pop.zona.nombre:"")+" - "+t._s(a.pop?"CRM: "+a.pop.zona.crm.nombre:"")+"\n                            ")])]),t._v(" "),s("td",{staticClass:"has-text-weight-light has-text-centered",class:t.primaryText},[t._v(t._s(a.operador))]),t._v(" "),s("td",{},[s("div",{staticClass:"has-text-weight-light",class:t.primaryText},[t._v("\n                                Inicio: "+t._s(a.started_at)+"\n                            ")]),t._v(" "),s("div",{staticClass:"has-text-weight-light",class:t.primaryText},[t._v("\n                                Término: "+t._s(a.ended_at)+"\n                            ")])]),t._v(" "),s("td",{},[s("div",{staticClass:"has-text-weight-light",class:t.primaryText},[t._v("\n                                "+t._s(a.propietario)+"\n                            ")]),t._v(" "),s("div",{staticClass:"has-text-weight-light",class:t.secondaryText},[t._v("\n                                "+t._s(a.fono_propietario||a.celular_propietario?"Contacto: ":"")+"\n                                "+t._s(a.fono_propietario&&a.celular_propietario?a.fono_propietario+" - "+a.celular_propietario:a.fono_propietario?a.fono_propietario:a.celular_propietario)+"\n                            ")])]),t._v(" "),s("td",{staticClass:"has-text-weight-light has-text-centered",class:t.primaryText},[t._v(t._s(a.rol_propiedad))]),t._v(" "),s("td",{staticClass:"has-text-weight-light has-text-centered",class:t.primaryText},[s("button",{staticClass:"button is-small is-link tooltip",attrs:{href:"/comsites/download",type:"button","data-tooltip":"Tooltip Text"}},[s("font-awesome-icon",{attrs:{icon:"bars"}})],1)])])})),0)]),t._v(" "),s("div",{staticClass:"level"},[s("nav",{staticClass:"level-left pagination",attrs:{role:"navigation","aria-label":"pagination"}},[s("vue-pagination",{attrs:{pagination:t.comsiteData,offset:4,primaryText:t.primaryText},on:{paginate:function(a){return t.getComsiteData()}}})],1),t._v(" "),s("div",{staticClass:"level-right has-text-right"},[s("div",{staticClass:"is-size-7 ",class:t.secondaryText},[t._v("Fecha ultima actualización: "+t._s(t.last_updated.formatted))])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);