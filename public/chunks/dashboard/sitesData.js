(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{307:function(t,s,a){"use strict";a.r(s);var i={components:{},props:["selectedCrm","selectedZona","core","primaryText","secondaryText","last_updated"],data:function(){return{sitesData:[],buttonLoading:0,isLoading:!1}},created:function(){this.getData()},mounted:function(){this.isLoading=!0},watch:{selectedCrm:function(t,s){this.getData()},selectedZona:function(t,s){this.getData()},core:function(t,s){this.getData()}},computed:{totalFijo:function(){var t=0;return this.sitesData.forEach((function(s){return t+=s.fijo})),t},totalMovil:function(){var t=0;return this.sitesData.forEach((function(s){return t+=s.movil})),t},totalSwitch:function(){var t=0;return this.sitesData.forEach((function(s){return t+=s.switch})),t},totalPhone:function(){var t=0;return this.sitesData.forEach((function(s){return t+=s.phone})),t},totalRepetidor:function(){var t=0;return this.sitesData.forEach((function(s){return t+=s.repetidor})),t},totalSites:function(){return this.totalFijo+this.totalMovil+this.totalSwitch+this.totalPhone+this.totalRepetidor}},methods:{getData:function(){var t=this;this.selectedCrm?this.selectedZona?axios.get("/api/sitesDataZona?zona_id=".concat(this.selectedZona.id,"&core=").concat(this.core)).then((function(s){t.sitesData=s.data.pop,t.isLoading=!1})):axios.get("/api/sitesDataCrm?crm_id=".concat(this.selectedCrm.id,"&core=").concat(this.core)).then((function(s){t.sitesData=s.data.pop,t.isLoading=!1})):axios.get("/api/sitesData?core=".concat(this.core)).then((function(s){t.sitesData=s.data.pop,t.isLoading=!1}))}}},e=a(0),r=Object(e.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-size-5 has-text-weight-semibold has-text-left",class:t.primaryText},[t._v("SITIOS")]),t._v(" "),a("div",{staticClass:"column is-size-4 has-text-weight-semibold has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalSites,"0,0")))])]),t._v(" "),a("table",{staticClass:"table is-fullwidth",staticStyle:{"background-color":"rgba(0,0,0,0)"}},[a("thead",[a("tr",{staticClass:"is-size-7"},[a("th",{class:t.secondaryText},[t._v(t._s(null==t.selectedCrm?"CRM":null==t.selectedZona?"Zona":"Comuna"))]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Fijo"}},[t._v("Fijo")])]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Móvil"}},[t._v("Móvil")])]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Switch"}},[t._v("Switch")])]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Phone"}},[t._v("Phone")])]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Repetidor"}},[t._v("Repetidor")])]),t._v(" "),a("th",{staticClass:"has-text-right",class:t.secondaryText},[a("abbr",{attrs:{title:"Total"}},[t._v("Total")])])])]),t._v(" "),a("tbody",[t._l(t.sitesData,(function(s){return a("tr",{key:s.id,staticClass:"is-size-7"},[a("td",[a("a",{staticClass:"has-text-weight-bold",class:t.secondaryText,attrs:{href:"",title:"CRM Norte"}},[t._v(t._s(s.nombre))])]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.fijo,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.movil,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.switch,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.phone,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.repetidor,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right has-text-weight-bold",class:t.primaryText},[t._v(t._s(t._f("numeral")(s.fijo+s.movil+s.switch+s.phone+s.repetidor,"0,0")))])])})),t._v(" "),a("tr",{staticClass:"is-size-7 has-text-weight-bold"},[a("td",[a("a",{class:t.secondaryText,attrs:{href:"",title:"Total"}},[t._v("Total")])]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalFijo,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalMovil,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalSwitch,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalPhone,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalRepetidor,"0,0")))]),t._v(" "),a("td",{staticClass:"has-text-right",class:t.primaryText},[t._v(t._s(t._f("numeral")(this.totalSites,"0,0")))])])],2)]),t._v(" "),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-right"},[a("div",{staticClass:"is-size-7 has-text-right",class:t.secondaryText,staticStyle:{"margin-top":"10px"}},[t._v("Ultima actualización: "+t._s(t.last_updated))])])]),t._v(" "),a("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading,"can-cancel":!0},on:{"update:active":function(s){t.isLoading=s}}})],1)}),[],!1,null,null,null);s.default=r.exports}}]);