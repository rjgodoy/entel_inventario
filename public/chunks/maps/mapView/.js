(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{311:function(t,n,e){"use strict";e.r(n);var a=e(5),o=e.n(a),r=e(20),i=e(17);function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){p(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function p(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function l(t,n,e,a,o,r,i){try{var c=t[r](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function u(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return d(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return d(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==e.return||e.return()}finally{if(c)throw r}}}}function d(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}var f={name:"App",props:["pops"],data:function(){return{mapAttributes:{latitude:-33.444655,longitude:-70.656169,zoom:3},popData:null}},computed:{locations:function(){var t,n=[],e=u(this.pops);try{for(e.s();!(t=e.n()).done;){var a=t.value,o={id:a.id,position:{lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)}};n.push(o)}}catch(t){e.e(t)}finally{e.f()}return n}},watch:{pops:function(t){this.loadMap()}},mounted:function(){},methods:{loadMap:function(){var t,n=this;return(t=o.a.mark((function t(){var e,a,c,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.a)();case 3:e=t.sent,a=new e.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(n.mapAttributes.latitude),lng:parseFloat(n.mapAttributes.longitude)},zoom:n.mapAttributes.zoom}),c=function(t){a.setZoom(13),a.setCenter(t.getPosition()),axios.get("/api/popInfo/".concat(t.id)).then((function(o){n.popData=o.data;var r,i=6;n.popData.sites&&n.popData.sites.forEach((function(t){t.classification_type_id&&t.classification_type_id<i&&(i=t.classification_type_id,r=t.classification_type.classification_type)}));var c=n.popData.comuna?n.popData.comuna.nombre_comuna:"",s=n.popData.zona?n.popData.zona.nombre_zona:"",p=n.popData.zona?n.popData.zona.crm.nombre_crm:"";new e.maps.InfoWindow({content:'\n                                <div class="card">\n                                    <div class="card-content">\n                                        <div class="media">\n                                            <div class="media-left">\n                                                <span class="tag '.concat(1==i?"is-danger":2==i?"is-warning":3==i?"is-blue":"is-link",' is-large has-text-weight-bold" data-tooltip="Categoría">\n                                                    ').concat(r,'\n                                                </span>\n                                            </div>\n                                            <div class="media-content">\n                                                <p class="has-text-weight-bold is-size-4">').concat(n.popData.nombre,'</p>\n                                                <p class="has-text-weight-normal is-size-6">').concat(n.popData.direccion?n.popData.direccion:"Sin dirección registrada",", ").concat(c,'</p>\n                                                <p class="has-text-weight-light is-size-6">Zona ').concat(s,", CRM ").concat(p,'</p>\n                                            </div>\n                                        </div>\n\n                                        <div class="content">\n                                            <a href="/pop/').concat(n.popData.id,'" target="_blank" class="button is-outlined is-link is-small">\n                                                <font-awesome-icon icon="info-circle"/>\n                                                &nbsp;Ver detalles\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>')}).open(a,t)}))},p=n.locations.map((function(t){var o=new e.maps.Marker(s(s({},t),{},{map:a}));return n.locations.length>1?o.addListener("click",(function(){return c(o)})):c(o),o})),new r.a(a,p,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){l(r,a,o,i,c,"next",t)}function c(t){l(r,a,o,i,c,"throw",t)}i(void 0)}))})()}}},m=e(0),v=Object(m.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticStyle:{height:"95%","padding-bottom":"0px"},attrs:{id:"map"}})}),[],!1,null,null,null);n.default=v.exports}}]);