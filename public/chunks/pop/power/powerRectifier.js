(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{394:function(e,i,t){"use strict";t.r(i);var s={components:{},props:["powerRectifier","canEdit","user"],data:function(){return{powerRectifierModes:[],currentPowerRectifierMode:"Sin Información",newPowerRectifierCapacity:this.powerRectifier.capacity?this.powerRectifier.capacity:0,powerRectifierModulesCapacity:this.currentPowerRectifierModulesCapacity(),powerRectifierModulesQuantity:this.powerRectifier.power_rectifier_modules.length,power_rectifier_mode_id:this.powerRectifier.power_rectifier_mode_id,isEditMode:!1,temp:0,volt:0}},mounted:function(){var e=this;this.getPowerRectifierModes(),this.getSnmpInfo(),setInterval((function(){return e.getSnmpInfo()}),5e3)},computed:{totalModulesCapacityMasterA:function(){return this.powerRectifierModulesQuantity*this.powerRectifierModulesCapacity}},watch:{power_rectifier_mode_id:function(e){var i=this;this.powerRectifierModes.forEach((function(t){t.id==e&&(i.currentPowerRectifierMode=t.mode)}))}},methods:{getPowerRectifierModes:function(){var e=this;axios.get("/api/powerRectifierModes").then((function(i){e.powerRectifierModes=i.data.powerRectifierModes,i.data.powerRectifierModes&&e.powerRectifierModes.forEach((function(i){i.id==e.power_rectifier_mode_id&&(e.currentPowerRectifierMode=i.mode)}))}))},currentPowerRectifierModulesCapacity:function(){var e=this,i=0;return this.powerRectifier.power_rectifier_modules.length&&Object.keys(this.powerRectifier.power_rectifier_modules).forEach((function(t){return i=e.powerRectifier.power_rectifier_modules[t].capacity})),i},saveChanges:function(){var e=this;if(!this.isEditMode&&(this.powerRectifier.capacity!=this.newPowerRectifierCapacity||this.powerRectifier.power_rectifier_mode_id!=this.power_rectifier_mode_id||this.powerRectifier.power_rectifier_modules.length!=this.powerRectifierModulesQuantity||this.currentPowerRectifierModulesCapacity()!=this.powerRectifierModulesCapacity)){var i={user_id:this.user.id,capacity:parseFloat(this.newPowerRectifierCapacity),power_rectifier_mode_id:this.power_rectifier_mode_id,power_rectifier_modules_quantity:parseFloat(this.powerRectifierModulesQuantity),power_rectifier_modules_capacities:parseFloat(this.powerRectifierModulesCapacity)};axios.put("/api/powerRectifiers/".concat(this.powerRectifier.id),i).then((function(i){e.$eventBus.$emit("power-rectifier-updated")}))}},deletePowerRectifier:function(){var e=this;console.log(this.powerRectifier),this.$buefy.dialog.confirm({message:"Confirma la eliminación de la Planta Rectificadora de la sala?",type:"is-link",onConfirm:function(){axios.delete("/api/powerRectifiers/".concat(e.powerRectifier.id)).then((function(i){e.$eventBus.$emit("power-rectifier-deleted"),e.$eventBus.$emit("room-data")}))}})},getSnmpInfo:function(){var e=this;axios.get("/api/powerRectifiersSnmp",{params:{ip:"10.244.110.181"}}).then((function(i){console.log(i.data),e.temp=i.data.temp,e.volt=i.data.volt/100}))}}},a=t(0),o=Object(a.a)(s,(function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"tile is-child box"},[t("div",{staticClass:"box p-2 is-shadowless has-background-dark"},[t("div",{staticClass:"columns is-vcentered"},[t("div",{staticClass:"column has-text-centered"},[t("div",{staticClass:"has-text-light has-text-weight-normal is-size-5"},[e._v("Voltaje: "),t("span",{staticClass:"has-text-weight-semibold"},[e._v(e._s(e.volt)+" V")])])]),e._v(" "),t("div",{staticClass:"column has-text-centered"},[t("div",{staticClass:"has-text-light has-text-weight-normal is-size-5"},[e._v("Temperatura: "),t("span",{staticClass:"has-text-weight-semibold"},[e._v(e._s(e.temp)+" ºC")])])])])]),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"has-text-weight-light is-size-7",staticStyle:{"margin-top":"5px"}},[e._v("Marca")]),e._v(" "),t("div",{staticClass:"has-text-weight-semibold is-size-5"},[e._v(e._s(e.powerRectifier.power_rectifier_type?e.powerRectifier.power_rectifier_type.type:"Sin información"))]),e._v(" "),e.powerRectifier.power_rectifier_type.model?t("div",{staticClass:"has-text-weight-light is-size-7",staticStyle:{"margin-top":"5px"}},[e._v("Modelo")]):e._e(),e._v(" "),e.powerRectifier.power_rectifier_type.model?t("div",{staticClass:"has-text-weight-semibold is-size-6"},[e._v(e._s(e.powerRectifier.power_rectifier_type?e.powerRectifier.power_rectifier_type.model:"Sin información"))]):e._e()]),e._v(" "),t("div",{staticClass:"column"},[t("div",{staticClass:"column has-text-right"},[t("font-awesome-icon",{staticClass:"has-text-grey-lighter",staticStyle:{opacity:"0.5"},attrs:{icon:["fas","random"],size:"3x"}})],1)])]),e._v(" "),t("div",{staticClass:"field"},[t("div",{staticClass:"has-text-weight-light is-size-7",staticStyle:{"margin-top":"5px"}},[e._v("Modo")]),e._v(" "),e.isEditMode?e._e():t("div",{staticClass:"has-text-weight-semibold is-size-5"},[e._v("\n                        "+e._s(e.currentPowerRectifierMode)+"\n                    ")]),e._v(" "),e.isEditMode?t("div",[t("b-select",{attrs:{placeholder:"Selecciona..."},model:{value:e.power_rectifier_mode_id,callback:function(i){e.power_rectifier_mode_id=i},expression:"power_rectifier_mode_id"}},e._l(e.powerRectifierModes,(function(i){return t("option",{key:i.id,domProps:{value:i.id}},[e._v("\n                                "+e._s(i.mode)+"\n                            ")])})),0)],1):e._e()]),e._v(" "),t("div",{staticClass:"field"},[t("div",{staticClass:"has-text-weight-light is-size-7",staticStyle:{"margin-top":"5px"}},[e._v("Capacidad total")]),e._v(" "),e.isEditMode?e._e():t("div",{staticClass:"has-text-weight-semibold is-size-5"},[e._v("\n                        "+e._s(e._f("numeral")(e.newPowerRectifierCapacity,"0,0.0"))+" "),t("span",{staticClass:"is-size-7"},[e._v("kW")])]),e._v(" "),e.isEditMode?t("b-input",{staticClass:"has-text-weight-bold is-size-5",attrs:{type:"number"},model:{value:e.newPowerRectifierCapacity,callback:function(i){e.newPowerRectifierCapacity=i},expression:"newPowerRectifierCapacity"}}):e._e()],1)]),e._v(" "),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"MODULOS","label-position":"on-border"}},[t("div",{staticClass:" box is-shadowless",staticStyle:{border:"solid 0.1rem #cccccc"}},[t("div",{staticClass:"field"},[t("div",{staticClass:"has-text-weight-light is-size-7"},[e._v("Nº módulos")]),e._v(" "),e.isEditMode?e._e():t("div",{staticClass:"has-text-weight-semibold is-size-5"},[e._v("\n                                "+e._s(e.powerRectifierModulesQuantity)+"\n                            ")]),e._v(" "),e.isEditMode?t("div",[t("b-input",{staticClass:"has-text-weight-bold is-size-5",attrs:{type:"text"},model:{value:e.powerRectifierModulesQuantity,callback:function(i){e.powerRectifierModulesQuantity=i},expression:"powerRectifierModulesQuantity"}}),e._v(" "),t("b-input",{staticClass:"has-text-weight-bold is-size-5",attrs:{type:"text"},model:{value:e.powerRectifierModulesCapacity,callback:function(i){e.powerRectifierModulesCapacity=i},expression:"powerRectifierModulesCapacity"}})],1):e._e()]),e._v(" "),t("div",{staticClass:"field"},[t("div",{staticClass:"has-text-weight-light is-size-7"},[e._v("Capacidad Total Módulos")]),e._v(" "),t("div",{staticClass:"has-text-weight-semibold is-size-5"},[e._v("\n                                "+e._s(e._f("numeral")(e.totalModulesCapacityMasterA,"0,0.0"))+" "),t("span",{staticClass:"is-size-7"},[e._v("kW")])])])])])],1)]),e._v(" "),e.canEdit?t("div",{staticClass:"field has-text-centered"},[t("b-button",{attrs:{type:e.isEditMode?"is-info":"is-link is-outlined",size:"is-small"},on:{click:function(i){e.isEditMode=!e.isEditMode,e.saveChanges()}}},[t("font-awesome-icon",{attrs:{icon:["fas","edit"]}}),e._v("\n                  "+e._s(e.isEditMode?"Modo Edición":"Editar parámetros de Grupo")+"\n            ")],1),e._v(" "),e.isEditMode?t("b-button",{staticClass:"is-pulled-right",attrs:{type:"is-danger",size:"is-small"},on:{click:function(i){return e.deletePowerRectifier()}}},[t("font-awesome-icon",{attrs:{icon:["fas","trash"]}}),e._v("\n                   Eliminar\n            ")],1):e._e()],1):e._e()])}),[],!1,null,null,null);i.default=o.exports}}]);